#{extends './homeTemplate.html' /}
#{set subtab:'users' /}
#{set title:'Groups Users' /}
	
<h4>Members</h4>
    
<table class="table">
	<thead>
	    <tr>
	        <th>Name</th>
	        <th>Type</th>
	        <th>Role</th>
	        <th>Robot Api Keys</th>
	        <th>Actions</th>
	    </tr>
	</thead>
	<tbody>
	    #{list groupDbo.children, as:'mapping'}
	        <tr>
	            <td>${mapping.entity.name}</td>
	            <td>${mapping.entity.typeString}</td>
	            <td>${mapping.permission}</td>
	            #{if mapping.entity.typeString == 'Robot' && mapping.ownRobot}
		            <td>${mapping.entity.apiKey}</td>
	            #{/if}
	            #{else}
	            	<td></td>
	            #{/else}
	            <td><a href="@{userEdit(groupDbo.name,mapping.entity.type,mapping.entity.name)}">edit</a>&nbsp;&nbsp;|&nbsp;
	            delete</td>
	        </tr>
	    #{/list}
	</tbody>
</table>

    <a href="@{userAdd(groupDbo.name, 'user')}" class="btn btn-primary">Add user</a>
    <a href="@{userAdd(groupDbo.name, 'robot')}" class="btn btn-primary">Create robot</a>