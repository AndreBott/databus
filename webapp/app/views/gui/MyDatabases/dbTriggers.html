#{extends './homeTemplate.html' /}
#{set title:'Add/Edit Database' /}
#{set subtab:'triggers' /}

#{list triggers, as:'trigger'}

#{form @postDbTriggerDelete(), id:'delete'+trigger_index}
<input type="hidden" name="cronId" value="${trigger.id}"/>
<input type="hidden" name="schemaName" value="${schema.schemaName}"/>

<div id="myModal${trigger_index}" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
    <h3 id="myModalLabel">Delete confirmation</h3>
  </div>
  <div class="modal-body">
     <p>Are you sure you want to delete cron job ${trigger.id} in the ${schema.schemaName} database?</p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <input type="submit" name="submit" value="Delete" class="btn btn-primary" />
  </div>
</div>
#{/form}

#{/list}

<h4>Triggers</h4>

Cron Jobs are added through the api and will call a url for a scheduled period

<table class="table">
    <thead>
        <tr>
            <th>Table Name</th>
            <th>Script Language</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        #{list triggers, as:'trigger'}
            <tr>
                <td>${trigger.url}</td>
                <td>${trigger.rate}</td>
                <td><a href="#myModal${trigger_index}" data-toggle="modal">Delete</a></td>
            </tr>
        #{/list}            
    </tbody>
</table>

